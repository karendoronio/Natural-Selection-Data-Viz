<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <title>Adapting for Survival</title>

  <!-- Uncomment if using d3: -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
  <script type="module">
    import * as Plot from "https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/dist/plot.umd.min.js";
    window.Plot = Plot; // Expose Plot globally
  </script>

  <!-- For loading Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hammersmith+One&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet"> <!-- for lighter mouse emoji -->
</head>

<body>
<div class="section" id="section-0">
  <header>
    <h1 style="font-size: 50px;">
      <a href=".">
        Adapting for Survival
      </a>
    </h1>
    <h2>How Different Types of Natural Selection Affect Species Populations</h2>
  </header>

  <!-- Add Navigation Menu -->
  <nav class="menu">
    <ul>
      <li><a href="#section-0">Home</a></li>
      <li><a href="#section-1">Directional Selection</a></li>
      <li><a href="#section-2">Stabilizing Selection</a></li>
      <li><a href="#section-3">Diversifying Selection</a></li>
      <li><a href="#section-4">Simulator</a></li>
    </ul>
  </nav>

  <!-- Navigation Dots -->
  <div id="navigation-dots">
    <span class="dot active" data-section="0"></span>
    <span class="dot" data-section="1"></span>
    <span class="dot" data-section="2"></span>
    <span class="dot" data-section="3"></span>
    <span class="dot" data-section="4"></span>
  </div>

  <div class="yellow-box">
    <h2>What is Natural Selection?</h2>
    <p>
      <strong>Natural selection</strong> is the process by which species adapt to their environments over time.
      For our final project, our team's goal is to demonstrate three types of natural selection:
      <strong>directional selection, stabilizing selection,</strong> and <strong>diversifying selection</strong>.
      Through our visualizations, we aim to explain how these processes affect species populations.
    </p>
  </div>

  <div class="image-slider">
    <div class="slider-item">
      <img src="images/moth.jpg" alt="Peppered Moth Example" />
      <div class="slider-caption">
        <a href="#section-1">Directional Selection</a>
      </div>
    </div>
    <div class="slider-item">
      <img src="images/finch.jpg" alt="Finch Beak Example" />
      <div class="slider-caption">
        <a href="#section-2">Stabilizing Selection</a>
      </div>
    </div>
    <div class="slider-item">
      <img src="images/mice.jpg" alt="Rock Pocket Mice Example" />
      <div class="slider-caption">
        <a href="#section-3">Diversifying Selection</a>
      </div>
    </div>
    <div class="navigation-buttons">
      <button class="next-button" onclick="scrollToSection('next')">Next</button>
    </div>
  </div>
</div>


<div class="section" id="section-1">
  <div id="directional-section" style="display: flex; gap: 20px; align-items: flex-start;">
    <!-- Left Column -->
    <div id="left-column" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- What is Directional Selection -->
      <div id="directional-selection-box" class="blue-box context-box">
        <h3>What is Directional Selection?</h3>
        <p>
          <strong>Directional Selection</strong> is a type of natural selection where individuals with traits on one
          extreme
          of the spectrum have a higher fitness, leading to a shift in the population's traits toward that extreme
          over time.
          It typically occurs in response to changing environmental conditions or pressures.
        </p>
      </div>

      <!-- Example Box -->
      <div id="example-box" class="context-box dark-blue-box">
        <h4>Example: Peppered Moths</h4>
        <p>
          During the Industrial Revolution, dark-colored peppered moths became more common because they were better
          camouflaged against soot-darkened trees, demonstrating directional selection as the population shifted
          toward
          darker traits.
        </p>
        <!-- Interactive Visualization -->
        <!-- Directional Section -->
        <div id="interactive-section" style="margin-top: 20px;">
          <div id="visualization"></div>
          <div id="slider-container">
            <label for="selectionSlider">Selection Pressure:</label>
            <input type="range" id="selectionSlider" min="1" max="10" step="1" value="5">
            <div id="selectionValue">Selection Pressure: 5</div>
          </div>
          <div id="progress-container">
            <div id="progress-bar"></div>
            <div id="progress-percentage">0%</div>
            <div style="display: flex; gap: 10px; justify-content: center;">
              <button id="startButtonDirectional">Start Animation</button>
              <button id="resetButtonDirectional">Reset Animation</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div id="right-column" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- Static Visualization -->
      <div id="static-visualization-box" class="context-box gray-box">
        <h4>Static Visualization</h4>
        <div id="static-content-directional"></div>
      </div>

      <!-- Instructions -->
      <div id="instructions-box" class="dark-blue-box context-box">
        <h4>Interactive Visualization: Try it Yourself!</h4>
        <p>
          This simulation demonstrates how environmental changes, such as tree darkening during the Industrial
          Revolution,
          impacted the survival of peppered moths. <br><br>
          <strong>How to interact:</strong> Adjust the <em>Selection Pressure</em> slider, then click
          "Start Animation" to see how moth populations evolve. Hit "Reset Animation" to generate a new layout of
          trees and moths.
          <em>Don't forget to hit "Start Animation" when you reset as well!</em>
        </p> <br>
        <h5>Legend:</h5>
        <ul>
          <li><span class="dot black"></span> <strong>Dark moths:</strong> Camouflaged on darkened trees</li>
          <li><span class="dot gray"></span> <strong>Light moths:</strong> Camouflaged on lighter trees</li>
          <li><span class="block brown"></span> <strong>Tree blocks:</strong> Transition from light to dark as soot
            accumulates</li>
        </ul> <br>
      </div>

      <div class="conclusion-box">
        <h4>What can we learn from this?</h4>
        <p>
          As you increase the <strong>selection pressure</strong>, you'll notice that darker moths become more
          prevalent in the population, while lighter moths decrease. This demonstrates how traits that offer a
          <strong>survival advantage</strong> in specific <strong>environmental conditions</strong> can dominate over
          time, shifting the population towards one <strong>extreme</strong>.
        </p>
      </div>
    </div>
  </div>

  <div class="navigation-buttons">
    <button class="prev-button" onclick="scrollToSection('prev')">Previous</button>
    <button class="top-button" onclick="scrollToTop()">Top</button>
    <button class="next-button" onclick="scrollToSection('next')">Next</button>
  </div>
</div>


<div class="section" id="section-2">
  <div id="stabilizing-section" style="display: flex; gap: 20px; align-items: flex-start;">
    <!-- Left Column -->
    <div id="left-column-stabilizing" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- What is Stabilizing Selection -->
      <div id="stabilizing-selection-box" class="context-box light-purple-box">
        <h3>What is Stabilizing Selection?</h3>
        <p>
          <strong>Stabilizing Selection</strong> is a type of natural selection that favors individuals with
          intermediate traits,
          reducing variation and maintaining the population's traits around a stable average. It often occurs in
          stable environments
          where extreme traits are disadvantageous.
        </p>
      </div>

      <!-- Example Box -->
      <div id="example-box-stabilizing" class="context-box purple-box">
        <h4>Explore: Finch Beaks</h4>
        <p>
          A popular example in the world of natural selection, trends in different finch populations can be used to show multiple types of natural selection.
          For stabilizing selection in particular, a common trend in finch beak lengths is the selection of intermediate beak sizes favored for efficient seed
          consumption.
          Extremely short or lengthy beaks are less suited to available resources, reducing survival. This maintains
          the population's
          beak length around an optimal average over time.
        </p>
        <!-- Interactive Visualization -->
        <div id="interactive-section-stabilizing" style="margin-top: 20px;">
          <div id="stabilizing-selection-viz"></div>
          <br>
          <div id="controls-container">
            <div id="year-toggle-group" class="year-selection">
              <span class="year-label">Select Year:</span>
              <input type="radio" id="year1975" name="year" value="1975" checked>
              <label for="year1975">1975</label>
              <input type="radio" id="year2012" name="year" value="2012">
              <label for="year2012">2012</label>
            </div>
            <div id="species-selector-container">
              <label for="species-selector">Select Species:</label>
              <select id="species-selector">
                <option value="fortis">fortis</option>
                <option value="scandens">scandens</option>
              </select>
            </div>
          </div> <!-- Closing #controls-container -->
        </div> <!-- Closing #interactive-section-stabilizing -->
      </div>
    </div> <!-- Closing #left-column-stabilizing -->

    <!-- Right Column -->
    <div id="right-column-stabilizing" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- Static Visualization -->
      <div id="static-visualization-box-stabilizing" class="context-box light-gray-box">
        <h4>Static Visualization</h4>
        <div id="static-content-stabilizing"></div>
      </div>

      <!-- Instructions -->
      <div id="instructions-box-stabilizing" class="context-box purple-box">
        <h4>Interactive Visualization: Try it Yourself!</h4>
        <p>
          Explore finch beak length by selecting different species and years.
          Explore real data from the Galápagos Islands, sampled from finch observations collected by biologists Peter and Rosemary Grant over the course of 40+ years.
          Try to determine which of the species show stabilizing selection!
        </p>
        <br>
        <p>
          <strong>How to interact:</strong> Use the dropdown to select a species and toggle between years to view the
          data change in beak length for each species of finch between 1975 and 2012.
        </p>
      </div>

      <div class="conclusion-box">
        <h4>What can we learn from this?</h4>
        <p>
          <strong>Stabilizing selection</strong> favors <strong>intermediate traits</strong>, which leads to reduced
          variation in a population over time. Among certain finch populations, beaks of moderate size are consistently
          favored for <strong>survival</strong>, while <strong>extreme sizes</strong> are selected against. This
          <strong>stabilizes</strong> the population around an <strong>optimal trait value</strong>.
        </p>
      </div>
    </div>
  </div>


      </div>
  </div>
  <div class="navigation-buttons">
    <button class="prev-button" onclick="scrollToSection('prev')">Previous</button>
    <button class="top-button" onclick="scrollToTop()">Top</button>
    <button class="next-button" onclick="scrollToSection('next')">Next</button>
  </div>
</div>


<div class="section" id="section-3">
  <div id="diversifying-section" style="display: flex; gap: 20px; align-items: flex-start;">
    <!-- Left Column -->
    <div id="left-column-diversifying" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- What is Diversifying Selection -->
      <div id="diversifying-selection-box" class="light-green-box">
        <h3>What is Diversifying Selection?</h3>
        <p>
          <strong>Diversifying Selection</strong> is a type of natural selection that favors individuals with extreme
          traits
          at both ends of the spectrum while selecting against intermediate traits. This can lead to increased
          variation within
          the population and may result in the formation of distinct subgroups.
        </p>
      </div>

      <!-- Example Box -->
      <div id="example-box-diversifying" class="dark-green-box">
        <h4>Example: Rock Pocket Mice</h4>
        <p>
          Rock pocket mice in desert environments demonstrate diversifying selection, where both light and
          dark-colored
          mice are favored, depending on the color of the rocks in their habitats, while intermediate-colored mice are
          more visible to predators.
        </p>
        <!-- Interactive Visualization -->
        <!-- Diversifying Section -->
        <div id="interactive-diversifying-section" style="margin-top: 20px;">
          <div id="diversifying-visualization"></div>
          <div id="diversifying-slider-container">
            <label for="diversifyingSelectionSlider">Selection Pressure:</label>
            <input type="range" id="diversifyingSelectionSlider" min="1" max="10" step="1" value="5">
            <div id="diversifyingSelectionValue">Selection Pressure: 5</div>
          </div>
          <div id="diversifying-progress-container">
            <div id="diversifying-progress-bar" style="width: 0%; background-color: green; height: 20px;"></div>
            <div id="diversifying-progress-percentage">0%</div>
            <div style="display: flex; gap: 10px; justify-content: center;">
              <button id="startButtonDiversifying">Start Animation</button>
              <button id="resetButtonDiversifying">Reset Animation</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div id="right-column-diversifying" style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
      <!-- Static Visualization -->
      <div id="static-visualization-box-diversifying" class="static-green-box">
        <h4>Static Visualization</h4>
        <div id="static-content-diversifying"></div>
      </div>

      <!-- Instructions -->
      <div id="instructions-box-diversifying" class="dark-green-box">
        <h4>Interactive Visualization: Try it Yourself!</h4>
        <p>
          Adjust the slider to control the size of the environmental hotspots and start the simulation.
        </p>
        <p> <br>
          <strong>How to interact:</strong> Use the slider to experiment with different hotspot sizes. Observe how
          extreme traits are favored while intermediate traits diminish over time.
        </p> <br>
        <h5>Legend:</h5>
        <ul>
          <li><span style="font-family: 'Noto Color Emoji', serif;">🐁</span><strong>  Light mice:</strong>
            
            Blend in with light outer environment</li>
          <li><strong>🐭 Mid-color mice: </strong>  Don't blend in with light or dark; vulnerable</li>
          <li><strong>🐀 Dark mice: </strong>  Blend in with dark volcanic rock</li>
        </ul>
      </div>
      <div class="conclusion-box">
        <h4>What can we learn from this?</h4>
        <p>
          <strong>Diversifying selection</strong> favors individuals with <strong>extreme traits</strong> while
          selecting against <strong>intermediate traits</strong>. In the case of rock pocket mice, both light and
          dark-colored mice thrive in their respective <strong>environments</strong>, while intermediate-colored mice
          are more likely to be <strong>preyed upon</strong>. This can lead to increased <strong>variation</strong>
          and the formation of <strong>distinct subgroups</strong> in the population.
        </p>
      </div>
    </div>
  </div>
  <div class="navigation-buttons">
    <button class="prev-button" onclick="scrollToSection('prev')">Previous</button>
    <button class="top-button" onclick="scrollToTop()">Top</button>
    <button class="next-button" onclick="scrollToSection('next')">Next</button>
  </div>
</div>


<br>

<!-- Wide interactive population graph + related explanation-->
<div class="section" id="section-4">
  <div id="selection-sim">
    <br>
    <h1 style="font-family: Hammersmith One, serif; font-size: 48px; margin-bottom: 0px;">Selection Simulator</h1>
    <div class="yellow-box">
      <p>
      <h3>See how trait frequencies shift over time</h3>
      Choose a type of natural selection and watch certain color traits become more or less prevalent within a population over time.
      Change the selection type mid-simulation to see how the skewed population reacts to new selective pressures.
      </p>
    </div>

    <!-- The actual simulation chart-->
    <div id="main-content-shared-chart"></div>
    <div id="selection-sim-radio-buttons">
      <div class="selection-sim-labeled-radio">
        <input type="radio" name="selection_type" id="radio-directional-dark" value="Directional Dark" checked>
        <label for="radio-directional-dark">Directional (→ Black)</label>
      </div>
      <div class="selection-sim-labeled-radio">
        <input type="radio" name="selection_type" id="radio-directional-light" value="Directional Light">
        <label for="radio-directional-light">Directional (→ White)</label>
      </div>
      <div class="selection-sim-labeled-radio">
        <input type="radio" name="selection_type" id="radio-stabilizing" value="Stabilizing">
        <label for="radio-stabilizing">Stabilizing</label>
      </div>
      <div class="selection-sim-labeled-radio">
        <input type="radio" name="selection_type" id="radio-diversifying" value="Diversifying">
        <label for="radio-diversifying">Diversifying</label>
      </div>
      <div class="selection-sim-labeled-radio">
        <input type="radio" name="selection_type" id="radio-constant" value="Constant">
        <label for="radio-constant">Little/No Change</label>
      </div>
    </div>
    <br>
  </div>
  <div class="navigation-buttons">
    <button class="prev-button" onclick="scrollToSection('prev')">Previous</button>
    <button class="top-button" onclick="scrollToTop()">Top</button>
  </div>
</div>

<!-- Floating (absolutely positioned) tooltip for selection simulation chart -->
<div id="tooltip"></div>

<footer>
  <p>
    <a href="https://github.com/meganwangsa/Natural-Selection-Data-Viz">Repository</a>
  </p>
</footer>


<script src="population-model.js"></script>
<script src="population-chart.js"></script>
<script src="central-viz-element.js"></script>
<script src="natural-selection-viz.js"></script>
<script src="main.js"></script>
<script src="scroll.js"></script>
</body>

</html>